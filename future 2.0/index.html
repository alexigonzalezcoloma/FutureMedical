<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Future Medical</title>
  
    <!-- Favicons -->
  <link href="img/favicon.png" rel="icon">
  <link href="img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,500,600,700,700i|Montserrat:300,400,500,600,700" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="lib/animate/animate.min.css" rel="stylesheet">
  <link href="lib/ionicons/css/ionicons.min.css" rel="stylesheet">
  <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
  <link href="css/style.css" rel="stylesheet">
  <link type="text/css" rel="stylesheet" href="css/jsmind.css" />
</head>
</head>

<body class="text-center">
    <div class="container">
        <div class="row">
            <div class="col">
                <div class="carousel slide text-center" data-ride="carousel" id="carousel-1" style="height: 249px;">
                    <div class="carousel-inner" role="listbox" >
                        <div class="carousel-item active"><img class="w-100 d-block" src="#" alt="Slide Image" style="height: 248px;"></div>
                        <div class="carousel-item"><img class="w-100 d-block" src="#" alt="Slide Image"></div>
                        <div class="carousel-item"><img class="w-100 d-block" src="#" alt="Slide Image"></div>
                    </div>
                    <div><a class="carousel-control-prev" href="#carousel-1" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span><span class="sr-only">Previous</span></a><a class="carousel-control-next" href="#carousel-1" role="button"
                            data-slide="next"><span class="carousel-control-next-icon"></span><span class="sr-only">Next</span></a></div>
                    <ol class="carousel-indicators">
                        <li data-target="#carousel-1" data-slide-to="0" class="active"></li>
                        <li data-target="#carousel-1" data-slide-to="1"></li>
                        <li data-target="#carousel-1" data-slide-to="2"></li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col">
                <nav class="navbar navbar-light navbar-expand-md">
                    <div class="container-fluid"><a class="navbar-brand" href="#">Inicio</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
                        <div class="collapse navbar-collapse"
                            id="navcol-1">
                            <ul class="nav navbar-nav">
                                <li class="nav-item" role="presentation"><a class="nav-link active" href="#">Quienes Somos&nbsp;</a></li>
                                <li class="nav-item" role="presentation"><a class="nav-link" href="#">Future Medical&nbsp;</a></li>
                                <li class="nav-item" role="presentation"><a class="nav-link" href="#">Mas Indormacion&nbsp;</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-xl-5 offset-xl-4">
                <h2>Transformacion de archivos</h2>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h3>Carga Archivo XML</h3>
                
            </div>
            <div class="col offset-xl-1"><input type="file" style="height: 53px;"></div>
        </div>
        <div class="row">
            <div class="col">
                <div class="card">
                    <label for="xml_input">Subir</label>
                    <input id="xml_input" class="xml_input"type="file" id="xml_input" />
	<h3>Contenido del archivo:</h3>
	<pre id="contenido-archivo"></pre>
	<section id="contenedor" style='border:solid 1px black; height: 100px;'>
	<button id="generar">Generar Doc</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col">
                <h1>Graficador de Archivos Json&nbsp;</h1>
            </div>
        </div>
        <div class="row">
            <div class="col">
                
                    <label for="file_input"><h3>Cargar Archivo Json&nbsp;</h3></label>
                    <input href="#" id="file_input" class="file_input" type="file" onchange="open_file()"></input>
                
            </div>
               
        </div>
        
            
                <section id="intro" class="clearfix">
                    <div class="container wrapper">
                      <div id="contenedor-principal">
                          <div class="row botones-nodos">
                              <div class="col-md-12 botones-nodos-2">          
                                <button type="button" id="boton-agregar-nodo" class="btn btn-light" onclick="add_node();">Agregar Nodo</button>
                                <button type="button" id="boton-eliminar-nodo" class="btn btn-light" onclick="remove_node();">Eliminar Nodo</button>
                                
                              </div>
                          </div><br>
                          <div class="row contenedor_arq_lista">
                              <div class="cont-arq col-12">
                                  <div id="jsmind_container"></div>
                                  <div style="display:none">
                                    <input class="file" type="file" id="image-chooser" accept="image/*"/>
                                  </div>
                                  <div class="col-3 cont-list lista-de-datos" id="scrollb">
                                    <ul id="app" class="scrollb list-group">
                                        <li id="texto-items" class="items-lista bg-light list-group-item"  v-for="item in items"><span id="texto-arq">Verficacion</span></li>
                                    </ul>
                                </div>
                                  <div>
                                      <script type="text/javascript" src="./js/jsmind.js"></script>
                                      <script type="text/javascript" src="./js/jsmind.draggable.js"></script>
                                      <script type="text/javascript" src="./js/jsmind.screenshot.js"></script>
                                      <script type="text/javascript" src="./js/jsmind_graficador.js"></script>
                                  </div>
                              </div>
                              
                          </div>
                      </div>
                    </div>
                  </section>
                </main>
         
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/jquery/jquery-migrate.min.js"></script>
    <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/mobile-nav/mobile-nav.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/counterup/counterup.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>
  
    <!-- Contact Form JavaScript File -->
    <script src="contactform/contactform.js"></script>
  
    <!-- Template Main Javascript File -->
    <script src="js/main.js"></script>


<script type="text/javascript">

	function parseXml(xml) {
	var dom = null;
	if (window.DOMParser) {
		try { 
			dom = (new DOMParser()).parseFromString(xml, "text/xml"); 
		} 
		catch (e) { dom = null; }
	}
	else if (window.ActiveXObject) {
		try {
			dom = new ActiveXObject('Microsoft.XMLDOM');
			dom.async = false;
			if (!dom.loadXML(xml)) // parse error ..

				window.alert(dom.parseError.reason + dom.parseError.srcText);
		} 
		catch (e) { dom = null; }
	}
	else
		alert("cannot parse xml string!");
	return dom;
	}

	function xml2json(xml, tab) {
	   var X = {
		  toObj: function(xml) {
			 var o = {};
			 if (xml.nodeType==1) {   // element node ..
				if (xml.attributes.length)   // element with attributes  ..
				   for (var i=0; i<xml.attributes.length; i++)
					  o["@"+xml.attributes[i].nodeName] = (xml.attributes[i].nodeValue||"").toString();
				if (xml.firstChild) { // element has child nodes ..
				   var textChild=0, cdataChild=0, hasElementChild=false;
				   for (var n=xml.firstChild; n; n=n.nextSibling) {
					  if (n.nodeType==1) hasElementChild = true;
					  else if (n.nodeType==3 && n.nodeValue.match(/[^ \f\n\r\t\v]/)) textChild++; // non-whitespace text
					  else if (n.nodeType==4) cdataChild++; // cdata section node
				   }
				   if (hasElementChild) {
					  if (textChild < 2 && cdataChild < 2) { // structured element with evtl. a single text or/and cdata node ..
						 X.removeWhite(xml);
						 for (var n=xml.firstChild; n; n=n.nextSibling) {
							if (n.nodeType == 3)  // text node
							   o["#text"] = X.escape(n.nodeValue);
							else if (n.nodeType == 4)  // cdata node
							   o["#cdata"] = X.escape(n.nodeValue);
							else if (o[n.nodeName]) {  // multiple occurence of element ..
							   if (o[n.nodeName] instanceof Array)
								  o[n.nodeName][o[n.nodeName].length] = X.toObj(n);
							   else
								  o[n.nodeName] = [o[n.nodeName], X.toObj(n)];
							}
							else  // first occurence of element..
							   o[n.nodeName] = X.toObj(n);
						 }
					  }
					  else { // mixed content
						 if (!xml.attributes.length)
							o = X.escape(X.innerXml(xml));
						 else
							o["#text"] = X.escape(X.innerXml(xml));
					  }
				   }
				   else if (textChild) { // pure text
					  if (!xml.attributes.length)
						 o = X.escape(X.innerXml(xml));
					  else
						 o["#text"] = X.escape(X.innerXml(xml));
				   }
				   else if (cdataChild) { // cdata
					  if (cdataChild > 1)
						 o = X.escape(X.innerXml(xml));
					  else
						 for (var n=xml.firstChild; n; n=n.nextSibling)
							o["#cdata"] = X.escape(n.nodeValue);
				   }
				}
				if (!xml.attributes.length && !xml.firstChild) o = null;
			 }
			 else if (xml.nodeType==9) { // document.node
				o = X.toObj(xml.documentElement);
			 }
			 else
				alert("unhandled node type: " + xml.nodeType);
			 return o;
		  },
		  toJson: function(o, name, ind) {
			 var json = name ? ("\""+name+"\"") : "";
			 if (o instanceof Array) {
				for (var i=0,n=o.length; i<n; i++)
				   o[i] = X.toJson(o[i], "", ind+"\t");
				json += (name?":[":"[") + (o.length > 1 ? ("\n"+ind+"\t"+o.join(",\n"+ind+"\t")+"\n"+ind) : o.join("")) + "]";
			 }
			 else if (o == null)
				json += (name&&":") + "null";
			 else if (typeof(o) == "object") {
				var arr = [];
				for (var m in o)
				   arr[arr.length] = X.toJson(o[m], m, ind+"\t");
				json += (name?":{":"{") + (arr.length > 1 ? ("\n"+ind+"\t"+arr.join(",\n"+ind+"\t")+"\n"+ind) : arr.join("")) + "}";
			 }
			 else if (typeof(o) == "string")
				json += (name&&":") + "\"" + o.toString() + "\"";
			 else
				json += (name&&":") + o.toString();
			 return json;
		  },
		  innerXml: function(node) {
			 var s = ""
			 if ("innerHTML" in node)
				s = node.innerHTML;
			 else {
				var asXml = function(n) {
				   var s = "";
				   if (n.nodeType == 1) {
					  s += "<" + n.nodeName;
					  for (var i=0; i<n.attributes.length;i++)
						 s += " " + n.attributes[i].nodeName + "=\"" + (n.attributes[i].nodeValue||"").toString() + "\"";
					  if (n.firstChild) {
						 s += ">";
						 for (var c=n.firstChild; c; c=c.nextSibling)
							s += asXml(c);
						 s += "</"+n.nodeName+">";
					  }
					  else
						 s += "/>";
				   }
				   else if (n.nodeType == 3)
					  s += n.nodeValue;
				   else if (n.nodeType == 4)
					  s += "<![CDATA[" + n.nodeValue + "]]>";
				   return s;
				};
				for (var c=node.firstChild; c; c=c.nextSibling)
				   s += asXml(c);
			 }
			 return s;
		  },
		  escape: function(txt) {
			 return txt.replace(/[\\]/g, "\\\\")
					   .replace(/[\"]/g, '\\"')
					   .replace(/[\n]/g, '\\n')
					   .replace(/[\r]/g, '\\r');
		  },
		  removeWhite: function(e) {
			 e.normalize();
			 for (var n = e.firstChild; n; ) {
				if (n.nodeType == 3) {  // text node
				   if (!n.nodeValue.match(/[^ \f\n\r\t\v]/)) { // pure whitespace text node
					  var nxt = n.nextSibling;
					  e.removeChild(n);
					  n = nxt;
				   }
				   else
					  n = n.nextSibling;
				}
				else if (n.nodeType == 1) {  // element node
				   X.removeWhite(n);
				   n = n.nextSibling;
				}
				else                      // any other node
				   n = n.nextSibling;
			 }
			 return e;
		  }
	   };
	   if (xml.nodeType == 9) // document node
		  xml = xml.documentElement;
	   var json = X.toJson(X.toObj(X.removeWhite(xml)), xml.nodeName, "\t");
	   return "{\n" + tab + (tab ? json.replace(/\t/g, tab) : json.replace(/\t|\n/g, "")) + "\n}";
	}
	
	//var  docum_json='';

	function leerArchivo(e) {
	var archivo = e.target.files[0];
	if (!archivo) {
		return;
	}
	var lector = new FileReader();
	lector.onload = function(e) {
		var contenido = e.target.result;
		var docum_json=xml2json(parseXml(contenido));
		var res='';
		res+=docum_json.replace("undefined","");
		
		mostrarContenido(res);


		$('#generar').click (function(){
        $("#contenedor").load("transformar.php",{soy_la_variable: res});
    	});
	};
	lector.readAsText(archivo);
	}

	function mostrarContenido(contenido) {
	var elemento = document.getElementById('contenido-archivo');
	elemento.innerHTML = contenido;
	}

	document.getElementById('file-input')
	.addEventListener('change', leerArchivo, false);	

	
</script>
  
</body>

</html>